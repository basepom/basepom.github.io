<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M13 from src/site/markdown/property_groups.md at 2024-02-10
 | Rendered using Apache Maven Fluido Skin 2.0.0-M8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M13" />
    <title>Property Helper Maven Plugin – Property groups definition</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M8.min.js"></script>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/basepom/maven-plugins" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-02-10<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 4.0.1-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Introduction</a></li>
    <li><a href="plugin-info.html">Goals</a></li>
    <li><a href="general_config.html">Plugin Configuration</a></li>
    <li><a href="using_build_properties.html">Using Maven build properties</a></li>
    <li><a href="fields.html">Field definitions</a></li>
    <li><a href="formatting_regexp.html">Formatting, Regular Expressions and Transformers</a></li>
    <li class="active"><a>Property groups</a></li>
    <li><a href="https://www.apache.org/licenses/LICENSE-2.0" class="externalLink">License</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><section>
<h2>Property groups definition</h2>
<p>For simple field definitions or properties, a field definition is sufficient. However, for more advanced use cases, such as activation based on build conditions
or more complex properties that combine multiple field types, property groups need to be used.</p>
<p>Example:</p>

<div class="verbatim">
<pre><code class="language-xml">
&lt;configuration&gt;
    &lt;propertyGroups&gt;
        &lt;propertyGroup&gt;
            &lt;id&gt;build-tag&lt;/id&gt;
            &lt;properties&gt;
                &lt;property&gt;
                    &lt;name&gt;build.tag&lt;/name&gt;
                    &lt;value&gt;@{build-tag}-@{build-number}-@{build-date}&lt;/value&gt;
                &lt;/property&gt;
            &lt;/properties&gt;
        &lt;/propertyGroup&gt;
    &lt;/propertyGroups&gt;
    &lt;dates&gt;
        &lt;date&gt;
            &lt;id&gt;build-date&lt;/id&gt;
            &lt;timezone&gt;UTC&lt;/timezone&gt;
            &lt;format&gt;yyyyMMdd_HHmmss&lt;/format&gt;
        &lt;/date&gt;
    &lt;/dates&gt;
    &lt;uuids&gt;
        &lt;uuid&gt;
            &lt;id&gt;build-tag&lt;/id&gt;
        &lt;/uuid&gt;
    &lt;/uuids&gt;
    &lt;numbers&gt;
        &lt;number&gt;
            &lt;id&gt;build-number&lt;/id&gt;
            &lt;propertyNameInFile&gt;build.number&lt;/propertyNameInFile&gt;
            &lt;propertyFile&gt;${user.home}/build.properties&lt;/propertyFile&gt;
            &lt;onMissingFile&gt;create&lt;/onMissingFile&gt;
            &lt;onMissingFileProperty&gt;create&lt;/onMissingFileProperty&gt;
            &lt;initialValue&gt;1&lt;/initialValue&gt;
        &lt;/number&gt;
    &lt;/numbers&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>This configuration defines a single property group <code>build-tag</code> with a single property <code>build.tag</code>, which is exposed to the maven build properties.</p>
<p>This property is defined as the combination of three separate fields, a date, a uuid and a persistent build number.</p>
<p>Similar to the different field types, property definitions as part of a property group can contain direct (<code>${ ... }</code>) property references or &#x201c;late binding&#x201d;
property references using <code>@{...}</code>.</p>
<p>Property groups can be activated specifically if a build is a snapshot or release build.</p>
<p>A property group can have the following attributes:</p>
<table class="table table-striped">
<thead>
<tr class="a">
<th>configuration attribute</th>
<th>allowed values</th>
<th>required</th>
<th>default value</th>
<th>function</th></tr></thead><tbody>
<tr class="b">
<td>id</td>
<td>any string</td>
<td>yes</td>
<td>-</td>
<td>Sets the name of the field</td></tr>
<tr class="a">
<td>activeOnRelease</td>
<td><code>true</code>, <code>false</code></td>
<td>no</td>
<td><code>true</code></td>
<td>Whether to activate this property group if the current build is a release build</td></tr>
<tr class="b">
<td>activeOnSnapshot</td>
<td><code>true</code>, <code>false</code></td>
<td>no</td>
<td><code>true</code></td>
<td>Whether to activate this property group if the current build is a snapshot build</td></tr>
<tr class="a">
<td>onDuplicateProperty</td>
<td><code>ignore</code>, <code>warn</code>, <code>fail</code></td>
<td>no</td>
<td><code>fail</code></td>
<td>Action when a property is defined multiple times</td></tr>
<tr class="b">
<td>onMissingField</td>
<td><code>ignore</code>, <code>warn</code>, <code>fail</code></td>
<td>no</td>
<td><code>fail</code></td>
<td>Action when a referenced field  is not defined</td></tr>
<tr class="a">
<td>properties</td>
<td>list of property definitions</td>
<td>no</td>
<td>(none)</td>
<td>Property definitions that are part of this property group</td></tr></tbody>
</table>

<p>A property definition can have the following attributes:</p>
<table class="table table-striped">
<thead>
<tr class="a">
<th>configuration attribute</th>
<th>allowed values</th>
<th>required</th>
<th>default value</th>
<th>function</th></tr></thead><tbody>
<tr class="b">
<td>name</td>
<td>any string</td>
<td>yes</td>
<td>-</td>
<td>sets the name of the field. Unlike all other objects, this attribute is not called <code>id</code> to allow multiple definitions of the same property in different property groups.</td></tr>
<tr class="a">
<td>value</td>
<td>any string</td>
<td>yes</td>
<td>-</td>
<td>sets the value for the property field. This is usually a combination of placeholders (<code>${...}</code> and <code>@{...}</code>) and text.</td></tr>
<tr class="b">
<td>transformers</td>
<td>comma-separated list</td>
<td>no</td>
<td>(none)</td>
<td>Define transformers for the property value</td></tr></tbody>
</table>

<p>The &#x201c;late binding&#x201d; property references (<code>@{...}</code>) in a property definition can reference all defined fields independent of whether they are exposed as a maven
build property or not.</p></section><section>
<h2>Property group activation</h2>
<p>By default, all defined property groups are always active. However, each property group provides attributes to control activation for release (non-SNAPSHOT) and
snapshot builds:</p>

<div class="verbatim">
<pre><code class="language-xml">
&lt;configuration&gt;
    &lt;propertyGroups&gt;
        &lt;propertyGroup&gt;
            &lt;id&gt;release-tag&lt;/id&gt;
            &lt;activateOnSnapshot&gt;false&lt;/activateOnSnapshot&gt;
            &lt;properties&gt;
                &lt;property&gt;
                    &lt;name&gt;release.tag&lt;/name&gt;
                    &lt;value&gt;RELEASE&lt;/value&gt;
                &lt;/property&gt;
            &lt;/properties&gt;
        &lt;/propertyGroup&gt;
        &lt;propertyGroup&gt;
            &lt;id&gt;snapshot-tag&lt;/id&gt;
            &lt;activateOnRelease&gt;false&lt;/activateOnRelease&gt;
            &lt;properties&gt;
                &lt;property&gt;
                    &lt;name&gt;release.tag&lt;/name&gt;
                    &lt;value&gt;@{release.id}&lt;/value&gt;
                &lt;/property&gt;
            &lt;/properties&gt;
        &lt;/propertyGroup&gt;
    &lt;/propertyGroups&gt;
    &lt;uuids&gt;
        &lt;uuid&gt;
            &lt;id&gt;release.id&lt;/id&gt;
        &lt;/uuid&gt;
    &lt;/uuids&gt;
&lt;/configuration&gt;
</code></pre></div>
<p>This configuration provides a property <code>release.tag</code> for each build. If the build is a release build, the value will be <code>RELEASE</code>, otherwise it will be a UUID
value.</p>
<p>While the two property groups define the same property (<code>release.tag</code>), they do not clash because one is only active when a release is built and the other only
when a snapshot is built.</p>
<p>For more complex use cases, it is also possible to activate specific groups explicitly using the <code>activeGroups</code> attribute:</p>

<div class="verbatim">
<pre><code class="language-xml">
&lt;project&gt;
    &lt;build&gt;
        &lt;pluginManagement&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;org.basepom.maven&lt;/groupId&gt;
                    &lt;artifactId&gt;property-helper-maven-plugin&lt;/artifactId&gt;
                    &lt;configuration&gt;
                        &lt;activeGroups /&gt;
                        &lt;propertyGroups&gt;
                            &lt;propertyGroup&gt;
                                &lt;id&gt;release-tag&lt;/id&gt;
                                &lt;properties&gt;
                                    &lt;property&gt;
                                        &lt;name&gt;release.tag&lt;/name&gt;
                                        &lt;value&gt;RELEASE&lt;/value&gt;
                                    &lt;/property&gt;
                                &lt;/properties&gt;
                            &lt;/propertyGroup&gt;
                            &lt;propertyGroup&gt;
                                &lt;id&gt;snapshot-tag&lt;/id&gt;
                                &lt;properties&gt;
                                    &lt;property&gt;
                                        &lt;name&gt;release.tag&lt;/name&gt;
                                        &lt;value&gt;@{release.id}&lt;/value&gt;
                                    &lt;/property&gt;
                                &lt;/properties&gt;
                            &lt;/propertyGroup&gt;
                        &lt;/propertyGroups&gt;
                        &lt;uuids&gt;
                            &lt;uuid&gt;
                                &lt;id&gt;release.id&lt;/id&gt;
                            &lt;/uuid&gt;
                        &lt;/uuids&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/pluginManagement&gt;
    &lt;/build&gt;
    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;release&lt;/id&gt;
            &lt;build&gt;
                &lt;plugins&gt;
                    &lt;plugin&gt;
                        &lt;groupId&gt;org.basepom.maven&lt;/groupId&gt;
                        &lt;artifactId&gt;property-helper-maven-plugin&lt;/artifactId&gt;
                        &lt;configuration&gt;
                            &lt;activeGroups&gt;
                                &lt;activeGroup&gt;release-tag&lt;/activeGroup&gt;
                            &lt;/activeGroups&gt;
                        &lt;/configuration&gt;
                    &lt;/plugin&gt;
                &lt;/plugins&gt;
            &lt;/build&gt;
        &lt;/profile&gt;
        &lt;profile&gt;
            &lt;id&gt;snapshot&lt;/id&gt;
            &lt;build&gt;
                &lt;plugins&gt;
                    &lt;plugin&gt;
                        &lt;groupId&gt;org.basepom.maven&lt;/groupId&gt;
                        &lt;artifactId&gt;property-helper-maven-plugin&lt;/artifactId&gt;
                        &lt;configuration&gt;
                            &lt;activeGroups&gt;
                                &lt;activeGroup&gt;snapshot-tag&lt;/activeGroup&gt;
                            &lt;/activeGroups&gt;
                        &lt;/configuration&gt;
                    &lt;/plugin&gt;
                &lt;/plugins&gt;
            &lt;/build&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;
&lt;/project&gt;
</code></pre></div>
<p>In this example, multiple groups are defined as part of the plugin management section and the actual plugin execution is controlled by setting
the needed active group in a maven profile. This allows consolidation of configuration in one place and then group activation as needed.</p>
<p>Note that there is a difference between no <code>activeGroups</code> attribute present and empty <code>activeGroup</code> attribute:</p>
<p>By default (no <code>activeGroups</code> attribute present), all groups are active.</p>
<p>Adding an empty <code>&lt;activeGroup /&gt;</code> attribute to the configuration turns off all groups (no property group is active).</p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2014–2024
<a href="https://github.com/basepom">The basepom project</a>
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>